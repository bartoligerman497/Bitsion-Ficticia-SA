@using BitsionFicticiaSA.Models.Cliente
@using BitsionFicticiaSA.Models.DTO
@model DTOModel;

@{
    ViewData["Title"] = "Gestión Clientes";
    ViewData["Objeto"] = "cliente";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.12.1/datatables.min.css" />

<div class="col-9 mt-3">
    <h2 class="text-red-2" title="Título general de la página">
        @ViewData["Title"]
    </h2>
</div>
<div class="col-12 border-top-red-3 p-3">
    <div class="row">
        <div class="col-2">
            <a href="/Cliente/AltaCliente" value="registrar" title="Botón de crear de un nuevo cliente"
                class="btn btn-success redondeado text-white" style="width: max-content;">
                Añadir nuevo Cliente
            </a>
        </div>
    </div>

    <br />
    <br />
    @if (Model.ListadoClientes != null)
    {
        @if (Model.ListadoClientes.Count() >= 1)
        {
            <table id="tabla" class="table table-striped table-bordered" style="width:100%"
        title="Listado de todos los clientes">
                <thead>
                    <tr>
                        <th>DNI</th>
                        <th>Nombre y Apellido</th>
                        <th>Edad</th>
                        <th>Genero</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (ClienteModel cliente in Model.ListadoClientes)
                    {
                        <tr>
                            <td>@cliente.Dni</td>
                            <td>@cliente.Nombre @cliente.Apellido</td>
                            <td>@cliente.Edad</td>
                            <td>@cliente.Genero.Descripcion</td>

                            <td style="width:25%;">
                                <a href="/Cliente/AltaCliente?idCliente=@cliente.IdCliente"
                        class="btn btn-warning text-white btn-gral" title="Botón de editar los datos del cliente">
                                    Editar
                                </a>
                                <a href="/Cliente/ConsultaCliente?idCliente=@cliente.IdCliente"
                        class="btn btn-primary text-white btn-gral" title="Botón de consultar los datos del cliente">
                                    Consultar
                                </a>
                                <a href="/Cliente/DeshabilitarCliente?idCliente=@cliente.IdCliente"
                        class="btn btn-danger text-white btn-gral"
                        title="Botón de eliminar todos los datos y registros del cliente">
                                    Eliminar
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
                <tfoot>
                    <tr>
                        <th>DNI</th>
                        <th>Nombre y Apellido</th>
                        <th>Edad</th>
                        <th>Genero</th>
                        <th>Acciones</th>

                    </tr>
                </tfoot>
            </table>
        }
        else
        {
            <table id="tabla" class="table table-striped table-bordered" style="width:100%"
        title="Listado de todos los clientes">
                <thead>
                    <tr>
                        <th>DNI</th>
                        <th>Nombre y Apellido</th>
                        <th>Edad</th>
                        <th>Genero</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        }
    }
</div>

<script>
    $(document).ready(function () {
        $('#tabla').DataTable();
    });
</script>
